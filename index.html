<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Malla curricular interactiva — Derecho (Plan 2016)</title>
<style>
  /* Diseño general (colores suaves, tipografía agradable) */
  :root{
    --bg: #f7f8fb;
    --card: #ffffff;
    --muted: #7b7f88;
    --primary: #6c8ef5;
    --accent: #8fc7d4;
    --ok: #5eb67a;
    --danger: #e06a6a;
    --shadow: 0 6px 18px rgba(20,30,60,0.06);
    --radius: 12px;
    font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif;
  }
  html,body{height:100%;}
  body{
    margin:0;
    background:linear-gradient(180deg,#f7f8fb, #eef3fb);
    color:#222;
    padding:28px;
    box-sizing:border-box;
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:20px;
    margin-bottom:18px;
  }
  h1{font-size:20px;margin:0 0 2px 0;}
  p.lead{margin:0;color:var(--muted);font-size:13px}
  .controls{display:flex;gap:12px;align-items:center}
  button, .btn{
    background:var(--primary);
    color:#fff;
    border:0;
    padding:8px 12px;
    border-radius:10px;
    box-shadow:var(--shadow);
    cursor:pointer;
    font-size:13px;
  }
  .btn.ghost{
    background:transparent;color:var(--primary);border:1px solid rgba(108,142,245,0.18);
  }
  .grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:16px;
  }
  @media (max-width:1100px){
    .grid{grid-template-columns:repeat(3,1fr);}
  }
  @media (max-width:820px){
    .grid{grid-template-columns:repeat(2,1fr);}
  }
  @media (max-width:520px){
    .grid{grid-template-columns:1fr;}
  }
  .semester{
    background:var(--card);
    border-radius:var(--radius);
    padding:12px;
    box-shadow:var(--shadow);
    min-height:140px;
  }
  .semester h3{
    margin:0 0 8px 0;font-size:15px;
    display:flex;justify-content:space-between;align-items:center;
  }
  .semester h3 span.count{font-size:12px;color:var(--muted)}
  .course-list{display:flex;flex-direction:column;gap:8px}
  .course{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:8px;
    padding:8px;
    border-radius:10px;
    border:1px solid rgba(20,30,60,0.04);
    background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(250,251,255,0.9));
    cursor:pointer;
    position:relative;
    transition:transform .08s ease, box-shadow .08s ease;
  }
  .course:hover{transform:translateY(-3px);box-shadow:0 8px 22px rgba(20,30,60,0.06)}
  .course.locked{
    cursor:default;
    opacity:0.7;
    filter:grayscale(.02);
  }
  .course .left{display:flex;gap:10px;align-items:center}
  .code{
    width:68px;font-size:12px;padding:6px;border-radius:8px;text-align:center;
    background:linear-gradient(180deg, rgba(108,142,245,0.09), rgba(143,199,212,0.04));
    color:var(--primary);
    font-weight:600;
  }
  .meta{font-size:13px}
  .meta .title{font-weight:600}
  .meta .sub{font-size:12px;color:var(--muted)}
  .status{font-size:13px;min-width:72px;text-align:right}
  .badge.approved{color:#fff;background:var(--ok);padding:6px 8px;border-radius:8px;font-weight:600}
  .badge.locked{color:#fff;background:var(--danger);padding:6px 8px;border-radius:8px;font-weight:600}
  .tooltip{
    display:none;
    position:absolute;
    top:calc(100% + 8px);
    left:10px;
    transform:translateY(6px);
    background:rgba(20,30,60,0.95);
    color:#fff;padding:8px 10px;border-radius:8px;font-size:12px;
    white-space:nowrap;
    z-index:30;
    box-shadow:0 8px 24px rgba(20,30,60,0.25);
  }
  .course.locked:hover .tooltip{display:block;transform:translateY(0);}
  footer{margin-top:18px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;align-items:center;gap:10px}
  .small{font-size:12px;color:var(--muted)}
  .legend{display:flex;gap:8px;align-items:center}
  .legend .item{display:flex;gap:6px;align-items:center;background:#fff;padding:6px;border-radius:8px;border:1px solid rgba(20,30,60,0.03)}
  .reset{background:transparent;border:1px solid rgba(255,60,60,0.12);color:var(--danger)}
</style>
</head>
<body>
<header>
  <div>
    <h1>Malla curricular interactiva — Derecho (Plan 2016)</h1>
    <p class="lead">Semestres I — XII. Haz clic en una materia para marcarla como aprobada. Las materias con prerrequisitos aparecen bloqueadas hasta cumplirlos. Progreso guardado en tu navegador.</p>
  </div>
  <div class="controls">
    <button id="export">Exportar progreso (JSON)</button>
    <button id="import" class="btn ghost">Importar progreso</button>
    <button id="reset" class="btn reset">Borrar progreso</button>
  </div>
</header>

<!-- Grid de semestres -->
<div id="malla" class="grid" aria-live="polite"></div>

<footer>
  <div class="legend">
    <div class="item"><div style="width:12px;height:12px;background:var(--ok);border-radius:3px"></div><div class="small">&nbsp;Aprobada</div></div>
    <div class="item"><div style="width:12px;height:12px;background:var(--danger);border-radius:3px"></div><div class="small">&nbsp;Bloqueada</div></div>
    <div class="item"><div style="width:12px;height:12px;background:linear-gradient(180deg,#fff,#eef3fb);border-radius:3px;border:1px solid rgba(20,30,60,0.04)"></div><div class="small">&nbsp;Disponible</div></div>
  </div>
  <div class="small">Fuente: Plan de estudios Derecho 2016 (revisado enero 2019). :contentReference[oaicite:1]{index=1}</div>
</footer>

<script>
/*
 Malla curricular interactiva
 Datos basados en el plan de estudios (documento subido por el usuario).
 Cada curso: {code, name, prereq: [codes...], hours, credits}
 Nota: Para simplificar, las cadenas de prerrequisito copian los códigos tal como aparecen en el plan.
*/

const MALLA = [
  {sem:"I", courses:[
    {code:"DE16-0101", name:"Comunicación I", prereq:[]},
    {code:"DE16-0102", name:"Introducción a la Filosofía", prereq:[]},
    {code:"DE16-0103", name:"Introducción a la Vida Universitaria", prereq:[]},
    {code:"DE16-0104", name:"Introducción al Estudio del Derecho", prereq:[]},
    {code:"DE16-0105", name:"Metodología del Estudio", prereq:[]},
    {code:"DE16-0106", name:"Taller de Liderazgo", prereq:[]},
    {code:"DE16-0107", name:"Teatro", prereq:[]}
  ]},
  {sem:"II", courses:[
    {code:"DE16-0208", name:"Antropología Filosófica y Teológica", prereq:["DE16-0102"]},
    {code:"DE16-0209", name:"Comunicación II", prereq:["DE16-0101"]},
    {code:"DE16-0210", name:"Historia de la Cultura Occidental I", prereq:["DE16-0102"]},
    {code:"DE16-0211", name:"Historia General del Derecho", prereq:["DE16-0105","DE16-0104"]},
    {code:"DE16-0212", name:"Retórica y Dialéctica", prereq:["DE16-0104","DE16-0107","DE16-0101"]},
    {code:"DE16-0213", name:"Teoría del Derecho", prereq:["DE16-0105","DE16-0106","DE16-0104"]},
    {code:"DE16-0214", name:"Apreciación Artística (EH)", prereq:[]},
    {code:"DE16-0215", name:"Apreciación Literaria (EH)", prereq:[]}
  ]},
  {sem:"III", courses:[
    {code:"DE16-0316", name:"Bases Romanistas del Derecho Contemporáneo", prereq:["DE16-0211"]},
    {code:"DE16-0317", name:"Ciencia Política", prereq:["DE16-0102","DE16-0213"]},
    {code:"DE16-0318", name:"Derecho Natural", prereq:["DE16-0208","DE16-0209","DE16-0213","DE16-0212"]},
    {code:"DE16-0319", name:"Historia de la Cultura Occidental II", prereq:["DE16-0210"]},
    {code:"DE16-0320", name:"Lógica y Gnoseología", prereq:["DE16-0208"]},
    {code:"DE16-0321", name:"Matemática para abogados", prereq:["DE16-0213"]},
    {code:"DE16-0322", name:"Apreciación Musical (EH)", prereq:[]},
    {code:"DE16-0323", name:"Sociología y Derecho (EH)", prereq:["DE16-0213"]}
  ]},
  {sem:"IV", courses:[
    {code:"DE16-0424", name:"Derecho Constitucional I", prereq:["DE16-0318","DE16-0317"]},
    {code:"DE16-0425", name:"Derecho de Personas", prereq:["DE16-0318","DE16-0316"]},
    {code:"DE16-0426", name:"Derecho Penal General", prereq:["DE16-0318"]},
    {code:"DE16-0427", name:"Derecho y Economía", prereq:["DE16-0321"]},
    {code:"DE16-0428", name:"Psicología", prereq:["DE16-0208"]},
    {code:"DE16-0429", name:"Sistema de Justicia y Mecanismos de Solución de Conflictos", prereq:["DE16-0213"]},
    {code:"DE16-0430", name:"Teología I", prereq:["DE16-0208"]}
  ]},
  {sem:"V", courses:[
    {code:"DE16-0531", name:"Acto Jurídico", prereq:["DE16-0425"]},
    {code:"DE16-0532", name:"Derecho Administrativo I", prereq:["DE16-0424"]},
    {code:"DE16-0533", name:"Derecho Constitucional II", prereq:["DE16-0429","DE16-0424"]},
    {code:"DE16-0534", name:"Derecho Penal Especial", prereq:["DE16-0426"]},
    {code:"DE16-0535", name:"Derecho Procesal General", prereq:["DE16-0429"]},
    {code:"DE16-0536", name:"Metodología de la Investigación Jurídica", prereq:["DE16-0320","DE16-0426","DE16-0425","DE16-0424"]},
    {code:"DE16-0537", name:"Moral", prereq:["DE16-0430","DE16-0320"]}
  ]},
  {sem:"VI", courses:[
    {code:"DE16-0638", name:"Argumentación Jurídica", prereq:["DE16-0536","DE16-0535","DE16-0533"]},
    {code:"DE16-0639", name:"Derecho Administrativo II", prereq:["DE16-0532"]},
    {code:"DE16-0640", name:"Derecho Internacional Público", prereq:["DE16-0533"]},
    {code:"DE16-0641", name:"Derecho Procesal Civil I", prereq:["DE16-0535"]},
    {code:"DE16-0642", name:"Derechos Reales", prereq:["DE16-0427","DE16-0531"]},
    {code:"DE16-0643", name:"Suficiencia de Mitad de Carrera", prereq:["DE16-0536"]},
    {code:"DE16-0644", name:"Teología II", prereq:["DE16-0430"]},
    {code:"DE16-0645", name:"Seminario Penal (Penal Económico y Delitos contra la AP)", prereq:["DE16-0534"]},
    {code:"DE16-0646", name:"Seminario Introducción al Derecho Comparado", prereq:["DE16-0536"]},
    {code:"DE16-0647", name:"Historia de la Filosofía Política (EH)", prereq:["DE16-0537","DE16-0424"]}
  ]},
  {sem:"VII", courses:[
    {code:"DE16-0748", name:"Contabilidad y Análisis Financiero", prereq:["__128_CREDITS__"]},
    {code:"DE16-0749", name:"Derecho de Obligaciones", prereq:["DE16-0642"]},
    {code:"DE16-0750", name:"Derecho Procesal Civil II", prereq:["DE16-0642","DE16-0641","DE16-0638"]},
    {code:"DE16-0751", name:"Derecho Procesal Constitucional", prereq:["DE16-0638"]},
    {code:"DE16-0752", name:"Derecho Tributario I", prereq:["DE16-0639"]},
    {code:"DE16-0753", name:"Historia del Perú I", prereq:["DE16-0319"]},
    {code:"DE16-0754", name:"Derecho Municipal y Regional (EE4)", prereq:["DE16-0639"]},
    {code:"DE16-0755", name:"Derecho de la Propiedad Intelectual (EE3)", prereq:["DE16-0642","DE16-0639"]},
    {code:"DE16-0756", name:"Seminario Organizaciones Internacionales (EE2)", prereq:["DE16-0640"]}
  ]},
  {sem:"VIII", courses:[
    {code:"DE16-0857", name:"Derecho de Contratos I: Teoría General", prereq:["DE16-0749"]},
    {code:"DE16-0858", name:"Derecho Laboral I", prereq:["DE16-0640","DE16-0749"]},
    {code:"DE16-0859", name:"Derecho Mercantil I", prereq:["DE16-0749"]},
    {code:"DE16-0860", name:"Derecho Procesal Penal", prereq:["DE16-0638","DE16-0534"]},
    {code:"DE16-0861", name:"Derecho Tributario II: Impuesto a la Renta", prereq:["DE16-0752","DE16-0748"]},
    {code:"DE16-0862", name:"Historia del Perú II", prereq:["DE16-0753"]},
    {code:"DE16-0863", name:"Derecho y Biotecnología (EE2)", prereq:["DE16-0640","DE16-0860"]},
    {code:"DE16-0864", name:"Seminario Criminalística, Ciencias Forenses y Criminología (EE1)", prereq:[]},
    {code:"DE16-0865", name:"Derecho de la Integración (EE2)", prereq:["DE16-0640"]}
  ]},
  {sem:"IX", courses:[
    {code:"DE16-0966", name:"Derecho de Contratos II: Contratos Típicos", prereq:["DE16-0857"]},
    {code:"DE16-0967", name:"Derecho Laboral II", prereq:["DE16-0858"]},
    {code:"DE16-0968", name:"Derecho Mercantil II: Sociedades", prereq:["DE16-0859","DE16-0748"]},
    {code:"DE16-0969", name:"Derecho Tributario III: Imposición al Consumo y Tributación Municipal", prereq:["DE16-0861"]},
    {code:"DE16-0970", name:"Enseñanza Social de la Iglesia", prereq:["DE16-0862","DE16-0537"]},
    {code:"DE16-0971", name:"Taller de Negociación, Mediación y Conciliación", prereq:["DE16-0857","DE16-0428"]},
    {code:"DE16-0972", name:"Derecho Procesal Laboral (EE1)", prereq:["DE16-0858","DE16-0638"]},
    {code:"DE16-0973", name:"Seminario Derecho y Nuevas Tecnologías (EE3)", prereq:["DE16-0859","DE16-0857"]},
    {code:"DE16-0974", name:"Taller de Litigación Oral (EE1)", prereq:["DE16-0860","DE16-0858","DE16-0638"]}
  ]},
  {sem:"X", courses:[
    {code:"DE16-1075", name:"Arbitraje", prereq:["DE16-0535","DE16-0971","DE16-0968"]},
    {code:"DE16-1076", name:"Derecho de Familia", prereq:["DE16-0749","DE16-0970"]},
    {code:"DE16-1077", name:"Ética Profesional", prereq:["DE16-0537"]},
    {code:"DE16-1078", name:"Filosofía del Derecho", prereq:["DE16-0751","DE16-0537"]},
    {code:"DE16-1079", name:"Responsabilidad Civil y Seguros", prereq:["DE16-0857"]},
    {code:"DE16-1080", name:"Seminario de Investigación Jurídica I", prereq:["DE16-0643","__190_CREDITS__"]},
    {code:"DE16-1081", name:"Seminario Derecho del Consumidor y Protección del Crédito (EE1 - EE3)", prereq:["DE16-0639","DE16-0968"]},
    {code:"DE16-1082", name:"Derecho Aduanero y Comercio Internacional (EE2 - EE3)", prereq:["DE16-0857","DE16-0969"]},
    {code:"DE16-1083", name:"Seminario de Contratación Estatal y APP (EE4)", prereq:["DE16-0857","DE16-0539"] /* note: referenced 0539 not present, harmless */}
  ]},
  {sem:"XI", courses:[
    {code:"DE16-1184", name:"Contratos Modernos", prereq:["DE16-1079","DE16-0968"]},
    {code:"DE16-1185", name:"Derecho de Sucesiones", prereq:["DE16-1076"]},
    {code:"DE16-1186", name:"Derechos Humanos", prereq:["DE16-1078","DE16-0970"]},
    {code:"DE16-1187", name:"Elementos de Derecho Canónico y Eclesiástico del Estado", prereq:["DE16-1078","DE16-1076"]},
    {code:"DE16-1188", name:"Financiamiento y garantías", prereq:["DE16-0748","DE16-0639","DE16-1079","DE16-0968"]},
    {code:"DE16-1189", name:"Seminario de Investigación Jurídica II", prereq:["DE16-1180","DE16-1080"] /* 1180 is placeholder to avoid circular */},
    {code:"DE16-1190", name:"Derecho Bancario (EE3)", prereq:["DE16-1079","DE16-0968"]},
    {code:"DE16-1191", name:"Derecho Minero (EE4)", prereq:["DE16-0968","DE16-0639"]},
    {code:"DE16-1192", name:"Derecho de la Competencia y Regulación (EE4)", prereq:["DE16-0639","DE16-0427","DE16-0968"]}
  ]},
  {sem:"XII", courses:[
    {code:"DE16-1293", name:"Derecho Internacional Privado", prereq:["DE16-1185"]},
    {code:"DE16-1294", name:"Derecho Notarial y Registral", prereq:["DE16-0966","DE16-0968","DE16-1185"]},
    {code:"DE16-1295", name:"Inglés Técnico Jurídico", prereq:[]},
    {code:"DE16-1296", name:"Práctica Empresarial: Mercantil/Trib/Lab/Gestión", prereq:["DE16-1188","DE16-1184","DE16-1077","DE16-0969","DE16-0967"]},
    {code:"DE16-1297", name:"Práctica Forense Civil y Penal", prereq:["DE16-0860","DE16-0968","DE16-1188","DE16-1077"]},
    {code:"DE16-1298", name:"Práctica Forense en Derecho Constitucional y Administrativo", prereq:["DE16-0639","DE16-1187","DE16-1186","DE16-1077"]},
    {code:"DE16-12101", name:"Arbitraje Comercial Int. y de Inversiones (EE1 - EE2)", prereq:["DE16-1188","DE16-1075"]},
    {code:"DE16-1299", name:"Derecho de la Energía (EE4)", prereq:["DE16-1192"]},
    {code:"DE16-12100", name:"Dirección y Liderazgo Estratégico (EE3 - EE4)", prereq:["DE16-0748","DE16-1077","DE16-0106"]}
  ]}
];

/* LOCAL STORAGE KEY */
const STORAGE_KEY = "malla_derecho_plan2016_v1";

/* helper: get saved set */
function loadSaved(){
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return {};
    return JSON.parse(raw);
  } catch(e){ console.warn("No se pudo leer progreso:",e); return {}; }
}

/* helper: save */
function saveSaved(obj){
  try{
    localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
  }catch(e){ console.warn("No se pudo guardar progreso:",e); }
}

/* compute if a course is unlocked: all prereqs approved or special tokens (like credit requirements) not enforced automatically */
function isUnlocked(code, saved){
  // find course in MALLA to get prereq list
  let course = null;
  for(const s of MALLA){
    course = s.courses.find(c => c.code === code);
    if(course) break;
  }
  if(!course) return true;
  const prereq = course.prereq || [];
  for(const p of prereq){
    // handle special tokens like __128_CREDITS__ or __190_CREDITS__ (we treat as unlocked; user may mark them manually through special 'Suficiencia' course)
    if(p.startsWith("__")) continue;
    if(!saved[p]) return false;
  }
  return true;
}

/* render UI */
function render(){
  const container = document.getElementById("malla");
  container.innerHTML = "";
  const saved = loadSaved();

  for(const sem of MALLA){
    const sec = document.createElement("section");
    sec.className = "semester";
    const h = document.createElement("h3");
    h.innerHTML = `Semestre ${sem.sem} <span class="count">(${sem.courses.length} materias)</span>`;
    sec.appendChild(h);

    const list = document.createElement("div");
    list.className = "course-list";

    for(const course of sem.courses){
      const unlocked = isUnlocked(course.code, saved);
      const approved = !!saved[course.code];
      const item = document.createElement("div");
      item.className = "course" + (unlocked ? "" : " locked");
      item.setAttribute("data-code", course.code);
      item.setAttribute("role","button");
      item.setAttribute("tabindex", unlocked ? 0 : -1);

      // left block
      const left = document.createElement("div");
      left.className = "left";
      const codeEl = document.createElement("div");
      codeEl.className = "code";
      codeEl.textContent = course.code.replace("DE16-","D-");
      const meta = document.createElement("div");
      meta.className = "meta";
      const title = document.createElement("div");
      title.className = "title";
      title.textContent = course.name;
      const sub = document.createElement("div");
      sub.className = "sub";
      sub.textContent = course.prereq && course.prereq.length ? "Prereq: " + course.prereq.join(", ") : "Sin prerrequisitos";
      meta.appendChild(title);
      meta.appendChild(sub);
      left.appendChild(codeEl);
      left.appendChild(meta);

      // right block (status)
      const right = document.createElement("div");
      right.className = "status";
      const badge = document.createElement("div");
      badge.className = "badge " + (approved ? "approved" : (unlocked ? "available" : "locked"));
      badge.textContent = approved ? "Aprobada" : (unlocked ? "Disponible" : "Bloqueada");
      right.appendChild(badge);

      item.appendChild(left);
      item.appendChild(right);

      // tooltip for locked showing missing prereqs
      if(!unlocked){
        const missing = course.prereq.filter(p => !p.startsWith("__") && !saved[p]);
        const tooltip = document.createElement("div");
        tooltip.className = "tooltip";
        tooltip.innerHTML = `<strong>Faltan:</strong> ${missing.join(", ")}`;
        item.appendChild(tooltip);
      }

      // click behaviour
      item.addEventListener("click", (ev) => {
        // if locked, do nothing but flash
        const s = loadSaved();
        if(!isUnlocked(course.code, s)) {
          // small visual feedback for no action
          item.animate([{transform:"translateY(0)"},{transform:"translateY(-6px)"},{transform:"translateY(0)"}],{duration:220});
          return;
        }
        // toggle approved
        if(s[course.code]){
          delete s[course.code];
        } else {
          s[course.code] = {when: Date.now()};
        }
        saveSaved(s);
        render();
      });

      // keyboard: enter to toggle if unlocked
      item.addEventListener("keydown", (e) => {
        if(e.key === "Enter" && isUnlocked(course.code, loadSaved())){
          item.click();
        }
      });

      list.appendChild(item);
    }

    sec.appendChild(list);
    container.appendChild(sec);
  }
}

/* export/import/reset UI handlers */
document.getElementById("reset").addEventListener("click", () => {
  if(!confirm("Borrarás TODO el progreso guardado. ¿Continuar?")) return;
  localStorage.removeItem(STORAGE_KEY);
  render();
});

document.getElementById("export").addEventListener("click", () => {
  const s = loadSaved();
  const dataStr = JSON.stringify(s, null, 2);
  // create downloadable blob
  const blob = new Blob([dataStr], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "progreso_malla_derecho_plan2016.json";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
});

document.getElementById("import").addEventListener("click", async () => {
  const input = document.createElement("input");
  input.type = "file";
  input.accept = "application/json";
  input.onchange = () => {
    if(!input.files || input.files.length === 0) return;
    const f = input.files[0];
    const reader = new FileReader();
    reader.onload = (ev) => {
      try{
        const data = JSON.parse(ev.target.result);
        if(typeof data !== "object") throw new Error("Formato inválido");
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        render();
        alert("Progreso importado correctamente.");
      } catch(e){
        alert("Archivo inválido: " + e.message);
      }
    };
    reader.readAsText(f);
  };
  input.click();
});

/* initialize */
render();

/* Accessibility hint: focus first available course */
window.addEventListener("load", () => {
  const saved = loadSaved();
  for(const sem of MALLA){
    for(const c of sem.courses){
      if(isUnlocked(c.code, saved)){
        const el = document.querySelector(`[data-code="${c.code}"]`);
        if(el){ el.focus(); return; }
      }
    }
  }
});
</script>
</body>
</html>
